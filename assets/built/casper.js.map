{"version":3,"sources":["custom.js","jquery.fitvids.js","gallery-card.js","infinite-scroll.js"],"names":["checkNavDrop","$","each","this","children","length","addClass","showNavDrop","click","e","preventDefault","parent","hasClass","removeClass","window","width","slideUp","slideDown","attr","indexOf","document","bind","is","target","has","trigger","showMobileMenu","toggleClass","checkClass","showSidebarMenu","documentElement","body","animate","scrollTop","offset","top","slideToggle","fn","fitVids","options","head","div","settings","customSelector","ignore","getElementById","getElementsByTagName","createElement","innerHTML","appendChild","childNodes","extend","selectors","push","ignoreList","$allVideos","find","join","not","aspectRatio","videoName","$this","parents","tagName","toLowerCase","css","isNaN","parseInt","height","_count","wrap","removeAttr","jQuery","Zepto","ready","checkHeadingScroll","show","hide","scroll","on","salesPopupShoved","anchorPos","topPos","windowHeight","$tmp","append","val","text","select","execCommand","remove","copySalesCode","copiedText","html","resize","addEventListener","querySelectorAll","forEach","image","container","closest","attributes","value","style","flex","nextElement","feedElement","buffer","ticking","loading","lastScrollY","lastWindowHeight","lastDocumentHeight","onPageLoad","status","removeEventListener","onScroll","onResize","response","item","importNode","resNextElement","querySelector","href","scrollHeight","onUpdate","xhr","XMLHttpRequest","responseType","open","send","requestTick","requestAnimationFrame","scrollY","innerHeight","classList","contains","passive"],"mappings":"AA0FA,SAAAA,eACAC,EAAA,mBAAAC,KAAA,WACA,EAAAD,EAAAE,MAAAC,SAAA,SAAAC,QACAJ,EAAAE,MAAAG,SAAA,YAMA,SAAAC,cACAN,EAAA,0BAAAO,MAAA,SAAAC,GACAA,EAAAC,iBACAT,EAAAE,MAAAQ,OAAA,MAAAC,SAAA,iBACAX,EAAAE,MAAAQ,OAAA,MAAAE,YAAA,gBACAZ,EAAAE,MAAAQ,OAAA,MAAAP,SAAA,SAAAS,YAAA,WACAZ,EAAA,YAAAY,YAAA,gBAEAZ,EAAAa,QAAAC,QAAA,MACAd,EAAAE,MAAAQ,OAAA,MAAAP,SAAA,SAAAY,YAGAf,EAAAa,QAAAC,QAAA,MACAd,EAAA,4BAAAe,UAEAf,EAAA,sBAAAY,YAAA,gBACAZ,EAAAE,MAAAQ,OAAA,MAAAL,SAAA,gBACAL,EAAA,oBAAAY,YAAA,WACAZ,EAAAE,MAAAQ,OAAA,MAAAP,SAAA,SAAAE,SAAA,WACAL,EAAA,YAAAK,SAAA,gBAEAL,EAAAa,QAAAC,QAAA,MACAd,EAAAE,MAAAQ,OAAA,MAAAP,SAAA,SAAAa,eAKAhB,EAAA,sBAAAO,MAAA,WACAP,EAAAE,MAAAe,KAAA,QAAAC,QAAA,KAAA,IACAlB,EAAA,gCAAAY,YAAA,gBACAZ,EAAAa,QAAAC,QAAA,OACAd,EAAA,4BAAAe,UACAf,EAAA,yBAAAO,SAEAP,EAAA,kBAAAY,YAAA,cAIAZ,EAAAmB,UAAAC,KAAA,mBAAA,SAAAZ,GACAR,EAAA,YAAAqB,GAAAb,EAAAc,SAAA,IAAAtB,EAAA,YAAAuB,IAAAf,EAAAc,QAAAlB,SAEA,MAAAJ,EAAAa,QAAAC,SACAd,EAAA,sBAAAY,YAAA,gBACAZ,EAAA,oBAAAY,YAAA,WACAZ,EAAA,YAAAY,YAAA,iBAEAZ,EAAA,YAAAW,SAAA,uBACAX,EAAA,mBAAAwB,QAAA,YAQA,SAAAC,iBACAzB,EAAA,yBAAAO,MAAA,WACAP,EAAAE,MAAAwB,YAAA,aACAC,eAIA,SAAAA,aACA3B,EAAA,yBAAAW,SAAA,cACAX,EAAA,UAAAY,YAAA,sBACAZ,EAAA,QAAAY,YAAA,sBACAZ,EAAA,YAAAY,YAAA,gBACAZ,EAAA,oBAAAY,YAAA,QAAAG,QAAA,OAEAf,EAAA,UAAAK,SAAA,sBACAL,EAAA,QAAAK,SAAA,sBACAL,EAAA,oBAAAK,SAAA,QAAAW,UAAA,MA0BA,SAAAY,kBACA5B,EAAA,uBAAAO,MAAA,WACAP,EAAAa,QAAAC,SAAA,MACAd,EAAA,YAAA0B,YAAA,eAEA1B,EAAA,YAAAW,SAAA,gBACAX,EAAA,CAAAmB,SAAAU,gBAAAV,SAAAW,OAAAC,QAAA,CACAC,UAAAhC,EAAA,YAAAiC,SAAAC,IAAA,IACA,KAGAlC,EAAA,0BAAAmC,YAAA,Q,8vBCnMA,SAAAnC,gBAIAA,EAAAoC,GAAAC,QAAA,SAAAC,GACA,IAOAC,EAEAC,EATAC,EAAA,CACAC,eAAA,KACAC,OAAA,MAgBA,OAbAxB,SAAAyB,eAAA,oBAEAL,EAAApB,SAAAoB,MAAApB,SAAA0B,qBAAA,QAAA,IAEAL,EAAArB,SAAA2B,cAAA,QACAC,UAAA,oUACAR,EAAAS,YAAAR,EAAAS,WAAA,KAGAX,GACAtC,EAAAkD,OAAAT,EAAAH,GAGApC,KAAAD,KAAA,WACA,IAAAkD,EAAA,CACA,kCACA,6BACA,sCACA,oDACA,SACA,SAGAV,EAAAC,gBACAS,EAAAC,KAAAX,EAAAC,gBAGA,IAAAW,EAAA,iBAEAZ,EAAAE,SACAU,EAAAA,EAAA,KAAAZ,EAAAE,QAGAW,EAAAtD,EAAAE,MAAAqD,KAAAJ,EAAAK,KAAA,OAEAF,GADAA,EAAAA,EAAAG,IAAA,kBACAA,IAAAJ,IAEApD,KAAA,WACA,IAYAyD,EAEAC,EAdAC,EAAA5D,EAAAE,MACA,EAAA0D,EAAAC,QAAAR,GAAAjD,QAGA,UAAAF,KAAA4D,QAAAC,eAAAH,EAAAlD,OAAA,UAAAN,QAAAwD,EAAAlD,OAAA,8BAAAN,SACAwD,EAAAI,IAAA,WAAAJ,EAAAI,IAAA,WAAAC,MAAAL,EAAA3C,KAAA,aAAAgD,MAAAL,EAAA3C,KAAA,YAEA2C,EAAA3C,KAAA,SAAA,GACA2C,EAAA3C,KAAA,QAAA,KAIAyC,GAFA,WAAAxD,KAAA4D,QAAAC,eAAAH,EAAA3C,KAAA,YAAAgD,MAAAC,SAAAN,EAAA3C,KAAA,UAAA,KAAAiD,SAAAN,EAAA3C,KAAA,UAAA,IAAA2C,EAAAO,WACAF,MAAAC,SAAAN,EAAA3C,KAAA,SAAA,KAAA2C,EAAA9C,QAAAoD,SAAAN,EAAA3C,KAAA,SAAA,KAEA2C,EAAA3C,KAAA,UACA0C,EAAA,SAAA3D,EAAAoC,GAAAC,QAAA+B,OACAR,EAAA3C,KAAA,OAAA0C,GACA3D,EAAAoC,GAAAC,QAAA+B,UAEAR,EAAAS,KAAA,gGAAA3D,OAAA,8BAAAsD,IAAA,cAAA,IAAAN,EAAA,KACAE,EAAAU,WAAA,UAAAA,WAAA,eAMAtE,EAAAoC,GAAAC,QAAA+B,OAAA,EAzEA,CA4EAvD,OAAA0D,QAAA1D,OAAA2D,ODxFAxE,EAAAmB,UAAAsD,MAAA,WAaA,SAAAC,IACA,GAAA1E,EAAAa,QAAAmB,YACAhC,EAAA,YAAAK,SAAA,iBAGAL,EAAA,YAAAY,YAAA,iBAGA,IAAAZ,EAAAa,QAAAmB,YACAhC,EAAA,eAAA2E,OAGA3E,EAAA,eAAA4E,OAtBAF,IACA3E,eACAO,cACAmB,iBACAG,kBAEA5B,EAAAa,QAAAgE,OAAA,WACAH,MAoBA1E,EAAA,eAAAO,MAAA,WACAP,EAAA,cAAA+B,QAAA,CAAAC,UAAA,GAAA,SAgBAhC,EAAAa,QAAAiE,GAAA,OAAA,WAGA,IAAAC,GAAA,EAEA/E,EAAAa,QAAAgE,OAAA,WAIA,IAGAG,EACAC,EACAC,EAJAlF,EAAA,iBAAA,SAEAgF,EAAAhF,EAAA,iBAAAiC,SAAAC,IACA+C,EAAAjF,EAAAa,QAAAmB,YACAkD,EAAAlF,EAAAa,QAAAsD,SAAA,EAEAa,EAAAC,EAAAC,IAAAH,IACA/E,EAAA,+CAAAK,SAAA,WACA0E,GAAA,MAIA/E,EAAA,kCAAAO,MAAA,WACAP,EAAA,+CAAAY,YAAA,aAYAZ,EAAA,0BAAAO,MAAA,YARA,WACA,IAAA4E,EAAAnF,EAAA,WACAA,EAAA,QAAAoF,OAAAD,GACAA,EAAAE,IAAArF,EAAA,eAAAsF,QAAAC,SACApE,SAAAqE,YAAA,QACAL,EAAAM,SAIAC,GACA,IAAAC,EAAA,WAAA3F,EAAA,eAAA4F,OACA5F,EAAA,yBAAA4F,KAAAD,OAyFA3F,EAAAa,QAAAgF,OAAA,WACA7F,EAAA,sBAAAY,YAAA,gBAAAT,SAAA,SAAAS,YAAA,WACAZ,EAAA,YAAAY,YAAA,gBACAZ,EAAA,oBAAA2E,OAEA3E,EAAAa,QAAAC,QAAA,OACAd,EAAA,yBAAAK,SAAA,aACAL,EAAA,UAAAY,YAAA,sBACAZ,EAAA,QAAAY,YAAA,sBACAZ,EAAA,oBAAAY,YAAA,QAAAgE,OACA5E,EAAA,oBAAA4E,QAGA5E,EAAAa,QAAAC,SAAA,KACAd,EAAA,YAAAY,YAAA,eACAZ,EAAA,0BAAA4E,SAEA5E,EAAA,YAAAK,SAAA,eACAL,EAAA,0BAAA2E,UEtLA,SAAAxD,GAYAA,EAAA2E,iBAAA,mBAXA,WACA3E,EAAA4E,iBAAA,yBACAC,QAAA,SAAAC,GACA,IAAAC,EAAAD,EAAAE,QAAA,qBACArF,EAAAmF,EAAAG,WAAAtF,MAAAuF,MACAlC,EAAA8B,EAAAG,WAAAjC,OAAAkC,MAEAH,EAAAI,MAAAC,KADAzF,EAAAqD,EACA,YARA,EAaAtD,OAAAM,W,onVCRA,SAAAN,EAAAM,GACA,IAGAqF,EAMAC,EAKAC,EAEAC,EACAC,EAEAC,EACAC,EACAC,EAEA,SAAAC,IACA,GAAA,MAAA9G,KAAA+G,OAGA,OAFApG,EAAAqG,oBAAA,SAAAC,QACAtG,EAAAqG,oBAAA,SAAAE,GAKAlH,KAAAmH,SAAAtB,iBAAA,qBACAC,QAAA,SAAAsB,GAIAb,EAAAzD,YAAA7B,EAAAoG,WAAAD,GAAA,MAIA,IAAAE,EAAAtH,KAAAmH,SAAAI,cAAA,kBACAD,EACAhB,EAAAkB,KAAAF,EAAAE,MAEA7G,EAAAqG,oBAAA,SAAAC,GACAtG,EAAAqG,oBAAA,SAAAE,IAIAL,EAAA5F,EAAAU,gBAAA8F,aAEAf,EADAD,GAAA,EAIA,SAAAiB,IAEA,IAYAC,EAZAjB,IAKAC,EAAAC,GAAAC,EAAAL,EACAC,GAAA,GAIAC,GAAA,GAEAiB,EAAA,IAAAhH,EAAAiH,gBACAC,aAAA,WAEAF,EAAA/B,iBAAA,OAAAkB,GAEAa,EAAAG,KAAA,MAAAxB,EAAAkB,MACAG,EAAAI,KAAA,QAGA,SAAAC,IACAvB,GAAA9F,EAAAsH,sBAAAP,GACAjB,GAAA,EAGA,SAAAQ,IACAN,EAAAhG,EAAAuH,QACAF,IAGA,SAAAd,IACAN,EAAAjG,EAAAwH,YACAtB,EAAA5F,EAAAU,gBAAA8F,aACAO,IA1FA/G,EAAAU,gBAAAyG,UAAAC,SAAA,0BAGA/B,EAAArF,EAAAsG,cAAA,qBAMAhB,EAAAtF,EAAAsG,cAAA,iBAQAb,EADAD,IAFAD,EAAA,KAKAG,EAAAhG,EAAAuH,QACAtB,EAAAjG,EAAAwH,YACAtB,EAAA5F,EAAAU,gBAAA8F,aAwEA9G,EAAAiF,iBAAA,SAAAqB,EAAA,CAAAqB,SAAA,IACA3H,EAAAiF,iBAAA,SAAAsB,GAEAc,MAjGA,CAkGArH,OAAAM","file":"casper.js","sourcesContent":["$(document).ready(function () {\n\n// Fixed header\n  checkHeadingScroll();\n  checkNavDrop();\n  showNavDrop();\n  showMobileMenu();\n  showSidebarMenu();\n\n  $(window).scroll(function () {\n    checkHeadingScroll();\n  });\n\n  function checkHeadingScroll() {\n    if ($(window).scrollTop() > 10) {\n      $('#gh-head').addClass('scrolled-down');\n    }\n    else {\n      $('#gh-head').removeClass('scrolled-down');\n    }\n\n    if ($(window).scrollTop() > 100) {\n      $('.btn-to-top').show();\n    }\n    else {\n      $('.btn-to-top').hide();\n    }\n  }\n\n  // Scroll to top button\n  $('.btn-to-top').click(function() {\n    $('html, body').animate({scrollTop: 0},500);\n  });\n\n  // Subscription popup\n    /*\n    $('.btn-subscribe').click(function(event) {\n      event.preventDefault();\n      $('#subscription-fader').addClass('visible');\n    });\n\n    $('#subscription-fader').click(function() {\n      $('#subscription-fader').removeClass('visible');\n    });\n  */\n});\n\n$(window).on('load', function(){\n\n  // Sales popup\n  let salesPopupShoved = false;\n\n  $(window).scroll(function () {\n    checkArticleScroll();\n  });\n\n  function checkArticleScroll() {\n    if(!($('.sales-anchor').length)) return;\n\n    let anchorPos = $('.sales-anchor').offset().top;\n    let topPos = $(window).scrollTop();\n    let windowHeight = $(window).height() / 2;\n\n    if (topPos + windowHeight > anchorPos && !salesPopupShoved) {\n      $('#sales-fader, .sales-popup, .discount-popup').addClass('visible');\n      salesPopupShoved = true;\n    }\n  }\n\n  $('#sales-fader, .btn-popup-close').click(function() {\n    $('#sales-fader, .sales-popup, .discount-popup').removeClass('visible');\n  });\n\n  // Copy sales code\n  function copySalesCode() {\n    let $tmp = $(\"<input>\");\n    $(\"body\").append($tmp);\n    $tmp.val($('#code-field').text()).select();\n    document.execCommand(\"copy\");\n    $tmp.remove();\n  }\n\n  $('.sales-popup .btn-copy').click(function() {\n    copySalesCode();\n    let copiedText = 'Copied: ' + $('#code-field').html();\n    $('.sales-popup .tooltip').html(copiedText);\n  });\n});\n\n// Check navigation dropdown\nfunction checkNavDrop() {\n  $( \"#main-menu > li\" ).each(function() {\n    if ($(this).children('.drop').length > 0) {\n      $(this).addClass('parent');\n    }\n  });\n}\n\n// Show navigation dropdown\nfunction showNavDrop() {\n  $('#main-menu .parent > a').click(function(e) {\n    e.preventDefault();\n    if ($(this).parent('li').hasClass('drop-visible')) {\n      $(this).parent('li').removeClass('drop-visible');\n      $(this).parent('li').children('.drop').removeClass('visible');\n      $('#gh-head').removeClass('drop-visible');\n\n      if ($(window).width() < 1024) {\n        $(this).parent('li').children('.drop').slideUp();\n      }\n    } else {\n      if ($(window).width() < 1024) {\n        $('#main-menu .drop.visible').slideUp();\n      }\n      $('#main-menu .parent').removeClass('drop-visible');\n      $(this).parent('li').addClass('drop-visible');\n      $('#main-menu .drop').removeClass('visible');\n      $(this).parent('li').children('.drop').addClass('visible');\n      $('#gh-head').addClass('drop-visible');\n\n      if ($(window).width() < 1024) {\n        $(this).parent('li').children('.drop').slideDown();\n      }\n    }\n  });\n\n  $('#main-menu .drop a').click(function() {\n    if ($(this).attr(\"href\").indexOf(\"#\") + 1) {\n      $('#gh-head, #main-menu .parent').removeClass('drop-visible');\n      if ($(window).width() < 1024) {\n        $('#main-menu .drop.visible').slideUp();\n        $('.navbar-toggler-right').click();\n      }\n      $('#gh-head .drop').removeClass('visible');\n    }\n  });\n\n  $(document).bind( \"mouseup touchend\", function(e){\n    if (!$(\"#gh-head\").is(e.target) && $(\"#gh-head\").has(e.target).length === 0) {\n\n      if ($(window).width() >= 1024) {\n        $('#main-menu .parent').removeClass('drop-visible');\n        $('#main-menu .drop').removeClass('visible');\n        $('#gh-head').removeClass('drop-visible');\n      } else {\n        if ($('#gh-head').hasClass('mobile-menu-opened')) {\n          $('.navbar-toggler').trigger('click');\n        }\n      }\n    }\n  });\n}\n\n// Show mobile menu\nfunction showMobileMenu() {\n  $('.navbar-toggler-right').click(function() {\n    $(this).toggleClass('collapsed');\n    checkClass();\n  });\n}\n\nfunction checkClass() {\n  if ($('.navbar-toggler-right').hasClass('collapsed')) {\n    $('header').removeClass('mobile-menu-opened');\n    $('body').removeClass('mobile-menu-opened');\n    $('#gh-head').removeClass('drop-visible');\n    $('.navbar-collapse').removeClass('show').slideUp(300);\n  } else {\n    $('header').addClass('mobile-menu-opened');\n    $('body').addClass('mobile-menu-opened');\n    $('.navbar-collapse').addClass('show').slideDown(300);\n  }\n}\n\n$(window).resize(function() {\n  $('#main-menu .parent').removeClass('drop-visible').children('.drop').removeClass('visible');\n  $('#gh-head').removeClass('drop-visible');\n  $('#main-menu .drop').show();\n\n  if ($(window).width() < 1024) {\n    $('.navbar-toggler-right').addClass('collapsed');\n    $('header').removeClass('mobile-menu-opened');\n    $('body').removeClass('mobile-menu-opened');\n    $('.navbar-collapse').removeClass('show').hide();\n    $('#main-menu .drop').hide();\n  }\n\n  if ($(window).width() <= 700) {\n    $('.sidebar').removeClass('nav-visible');\n    $('.sidebar .sidebar-menu').hide();\n  } else {\n    $('.sidebar').addClass('nav-visible');\n    $('.sidebar .sidebar-menu').show();\n  }\n});\n\nfunction showSidebarMenu() {\n  $('.mobile-menu-opener').click(function () {\n    if ($(window).width() <= 700) {\n      $('.sidebar').toggleClass('nav-visible');\n\n      if ($('.sidebar').hasClass('nav-visible')) {\n        $([document.documentElement, document.body]).animate({\n          scrollTop: $(\".sidebar\").offset().top - 35\n        }, 300);\n      }\n\n      $('.sidebar .sidebar-menu').slideToggle(300);\n    }\n  });\n}\n","/*jshint browser:true */\n/*!\n* FitVids 1.3\n*\n*\n* Copyright 2017, Chris Coyier + Dave Rupert + Ghost Foundation\n* This is an unofficial release, ported by John O'Nolan\n* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/\n* Released under the MIT license\n*\n*/\n\n;(function( $ ){\n\n  'use strict';\n\n  $.fn.fitVids = function( options ) {\n    var settings = {\n      customSelector: null,\n      ignore: null\n    };\n\n    if(!document.getElementById('fit-vids-style')) {\n      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js\n      var head = document.head || document.getElementsByTagName('head')[0];\n      var css = '.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';\n      var div = document.createElement(\"div\");\n      div.innerHTML = '<p>x</p><style id=\"fit-vids-style\">' + css + '</style>';\n      head.appendChild(div.childNodes[1]);\n    }\n\n    if ( options ) {\n      $.extend( settings, options );\n    }\n\n    return this.each(function(){\n      var selectors = [\n        'iframe[src*=\"player.vimeo.com\"]',\n        'iframe[src*=\"youtube.com\"]',\n        'iframe[src*=\"youtube-nocookie.com\"]',\n        'iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n        'object',\n        'embed'\n      ];\n\n      if (settings.customSelector) {\n        selectors.push(settings.customSelector);\n      }\n\n      var ignoreList = '.fitvidsignore';\n\n      if(settings.ignore) {\n        ignoreList = ignoreList + ', ' + settings.ignore;\n      }\n\n      var $allVideos = $(this).find(selectors.join(','));\n      $allVideos = $allVideos.not('object object'); // SwfObj conflict patch\n      $allVideos = $allVideos.not(ignoreList); // Disable FitVids on this video.\n\n      $allVideos.each(function(){\n        var $this = $(this);\n        if($this.parents(ignoreList).length > 0) {\n          return; // Disable FitVids on this video.\n        }\n        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }\n        if ((!$this.css('height') && !$this.css('width')) && (isNaN($this.attr('height')) || isNaN($this.attr('width'))))\n        {\n          $this.attr('height', 9);\n          $this.attr('width', 16);\n        }\n        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),\n            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),\n            aspectRatio = height / width;\n        if(!$this.attr('name')){\n          var videoName = 'fitvid' + $.fn.fitVids._count;\n          $this.attr('name', videoName);\n          $.fn.fitVids._count++;\n        }\n        $this.wrap('<div class=\"fluid-width-video-container\"><div class=\"fluid-width-video-wrapper\"></div></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+'%');\n        $this.removeAttr('height').removeAttr('width');\n      });\n    });\n  };\n\n  // Internal counter for unique video names.\n  $.fn.fitVids._count = 0;\n\n// Works with either jQuery or Zepto\n})( window.jQuery || window.Zepto );\n","/* eslint-env browser */\n\n/**\n * Gallery card support\n * Used on any individual post/page\n *\n * Detects when a gallery card has been used and applies sizing to make sure\n * the display matches what is seen in the editor.\n */\n\n(function (window, document) {\n    var resizeImagesInGalleries = function resizeImagesInGalleries() {\n        var images = document.querySelectorAll('.kg-gallery-image img');\n        images.forEach(function (image) {\n            var container = image.closest('.kg-gallery-image');\n            var width = image.attributes.width.value;\n            var height = image.attributes.height.value;\n            var ratio = width / height;\n            container.style.flex = ratio + ' 1 0%';\n        });\n    };\n\n    document.addEventListener('DOMContentLoaded', resizeImagesInGalleries);\n})(window, document);\n","/* eslint-env browser */\n\n/**\n * Infinite Scroll\n * Used on all pages where there is a list of posts (homepage, tag index, etc).\n *\n * When the page is scrolled to 300px from the bottom, the next page of posts\n * is fetched by following the the <link rel=\"next\" href=\"...\"> that is output\n * by {{ghost_head}}.\n *\n * The individual post items are extracted from the fetched pages by looking for\n * a wrapper element with the class \"post-card\". Any found elements are appended\n * to the element with the class \"post-feed\" in the currently viewed page.\n */\n\n(function (window, document) {\n    if (document.documentElement.classList.contains('no-infinite-scroll')) return;\n\n    // next link element\n    var nextElement = document.querySelector('link[rel=next]');\n    if (!nextElement) {\n        return;\n    }\n\n    // post feed element\n    var feedElement = document.querySelector('.post-feed');\n    if (!feedElement) {\n        return;\n    }\n\n    var buffer = 300;\n\n    var ticking = false;\n    var loading = false;\n\n    var lastScrollY = window.scrollY;\n    var lastWindowHeight = window.innerHeight;\n    var lastDocumentHeight = document.documentElement.scrollHeight;\n\n    function onPageLoad() {\n        if (this.status === 404) {\n            window.removeEventListener('scroll', onScroll);\n            window.removeEventListener('resize', onResize);\n            return;\n        }\n\n        // append contents\n        var postElements = this.response.querySelectorAll('article.post-card');\n        postElements.forEach(function (item) {\n            // document.importNode is important, without it the item's owner\n            // document will be different which can break resizing of\n            // `object-fit: cover` images in Safari\n            feedElement.appendChild(document.importNode(item, true));\n        });\n\n        // set next link\n        var resNextElement = this.response.querySelector('link[rel=next]');\n        if (resNextElement) {\n            nextElement.href = resNextElement.href;\n        } else {\n            window.removeEventListener('scroll', onScroll);\n            window.removeEventListener('resize', onResize);\n        }\n\n        // sync status\n        lastDocumentHeight = document.documentElement.scrollHeight;\n        ticking = false;\n        loading = false;\n    }\n\n    function onUpdate() {\n        // return if already loading\n        if (loading) {\n            return;\n        }\n\n        // return if not scroll to the bottom\n        if (lastScrollY + lastWindowHeight <= lastDocumentHeight - buffer) {\n            ticking = false;\n            return;\n        }\n\n        loading = true;\n\n        var xhr = new window.XMLHttpRequest();\n        xhr.responseType = 'document';\n\n        xhr.addEventListener('load', onPageLoad);\n\n        xhr.open('GET', nextElement.href);\n        xhr.send(null);\n    }\n\n    function requestTick() {\n        ticking || window.requestAnimationFrame(onUpdate);\n        ticking = true;\n    }\n\n    function onScroll() {\n        lastScrollY = window.scrollY;\n        requestTick();\n    }\n\n    function onResize() {\n        lastWindowHeight = window.innerHeight;\n        lastDocumentHeight = document.documentElement.scrollHeight;\n        requestTick();\n    }\n\n    window.addEventListener('scroll', onScroll, {passive: true});\n    window.addEventListener('resize', onResize);\n\n    requestTick();\n})(window, document);\n"]}