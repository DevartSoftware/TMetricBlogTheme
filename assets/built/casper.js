function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}!function(i){"use strict";i.fn.fitVids=function(e){var t,r,o={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(t=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(r.childNodes[1])),e&&i.extend(o,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];o.customSelector&&e.push(o.customSelector);var n=".fitvidsignore";o.ignore&&(n=n+", "+o.ignore);e=i(this).find(e.join(","));(e=(e=e.not("object object")).not(n)).each(function(){var e,t,r=i(this);0<r.parents(n).length||"embed"===this.tagName.toLowerCase()&&r.parent("object").length||r.parent(".fluid-width-video-wrapper").length||(r.css("height")||r.css("width")||!isNaN(r.attr("height"))&&!isNaN(r.attr("width"))||(r.attr("height",9),r.attr("width",16)),e=("object"===this.tagName.toLowerCase()||r.attr("height")&&!isNaN(parseInt(r.attr("height"),10))?parseInt(r.attr("height"),10):r.height())/(isNaN(parseInt(r.attr("width"),10))?r.width():parseInt(r.attr("width"),10)),r.attr("name")||(t="fitvid"+i.fn.fitVids._count,r.attr("name",t),i.fn.fitVids._count++),r.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),r.removeAttr("height").removeAttr("width"))})})},i.fn.fitVids._count=0}(window.jQuery||window.Zepto),$(document).ready(function(){function e(){10<$(window).scrollTop()?$("#gh-head").addClass("scrolled-down"):$("#gh-head").removeClass("scrolled-down"),100<$(window).scrollTop()?$(".btn-to-top").show():$(".btn-to-top").hide()}e(),$(window).scroll(function(){e()}),$(".btn-to-top").click(function(){$("html, body").animate({scrollTop:0},500)}),$(".btn-subscribe").click(function(e){e.preventDefault(),$(".fader").addClass("visible")}),$(".fader").click(function(){$(".fader").removeClass("visible")})}),function(e){e.addEventListener("DOMContentLoaded",function(){e.querySelectorAll(".kg-gallery-image img").forEach(function(e){var t=e.closest(".kg-gallery-image"),r=e.attributes.width.value,e=e.attributes.height.value;t.style.flex=r/e+" 1 0%"})})}((window,document)),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.fuzzysort=t()}(this,function(){var j="undefined"!=typeof require&&"undefined"==typeof window,r=new Map,n=new Map,E=[];E.total=0;var b=[],k=[];function t(){r.clear(),n.clear(),b=[],k=[]}function P(e){for(var t=-9007199254740991,r=e.length-1;0<=r;--r){var n=e[r];null===n||t<(n=n.score)&&(t=n)}return-9007199254740991===t?null:t}function N(e,t){var r=e[t];if(void 0!==r)return r;for(var n=t,o=(n=!Array.isArray(t)?t.split("."):n).length,i=-1;e&&++i<o;)e=e[n[i]];return e}function q(e){return"object"==typeof e}function o(){var i=[],l=0,e={};function t(){for(var e=i[n=0],t=1;t<l;){var r=t+1,n=t;r<l&&i[r].score<i[t].score&&(n=r),i[n-1>>1]=i[n],t=1+(n<<1)}for(var o=n-1>>1;0<n&&e.score<i[o].score;o=(n=o)-1>>1)i[n]=i[o];i[n]=e}return e.add=function(e){var t=l;i[l++]=e;for(var r=t-1>>1;0<t&&e.score<i[r].score;r=(t=r)-1>>1)i[t]=i[r];i[t]=e},e.poll=function(){if(0!==l){var e=i[0];return i[0]=i[--l],t(),e}},e.peek=function(e){if(0!==l)return i[0]},e.replaceTop=function(e){i[0]=e,t()},e}var x=o();return function e(_){var I={single:function(e,t,r){return e?(q(e)||(e=I.getPreparedSearch(e)),t?(q(t)||(t=I.getPrepared(t)),((r&&void 0!==r.allowTypo?r.allowTypo:!_||void 0===_.allowTypo||_.allowTypo)?I.algorithm:I.algorithmNoTypo)(e,t,e[0])):null):null},go:function(e,t,r){if(!e)return E;var n,o,i=(e=I.prepareSearch(e))[0],l=r&&r.threshold||_&&_.threshold||-9007199254740991,s=r&&r.limit||_&&_.limit||9007199254740991,a=(r&&void 0!==r.allowTypo?r.allowTypo:!_||void 0===_.allowTypo||_.allowTypo)?I.algorithm:I.algorithmNoTypo,u=0,c=0,d=t.length;if(r&&r.keys)for(var f=r.scoreFn||P,h=r.keys,p=h.length,g=d-1;0<=g;--g){for(var v=t[g],y=new Array(p),m=p-1;0<=m;--m)(n=N(v,b=h[m]))?(q(n)||(n=I.getPrepared(n)),y[m]=a(e,n,i)):y[m]=null;y.obj=v;var w=f(y);null!==w&&(w<l||(y.score=w,u<s?(x.add(y),++u):(++c,w>x.peek().score&&x.replaceTop(y))))}else if(r&&r.key)for(var b=r.key,g=d-1;0<=g;--g)(n=N(v=t[g],b))&&(null!==(o=a(e,n=!q(n)?I.getPrepared(n):n,i))&&(o.score<l||(o={target:o.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:o.score,indexes:o.indexes,obj:v},u<s?(x.add(o),++u):(++c,o.score>x.peek().score&&x.replaceTop(o)))));else for(g=d-1;0<=g;--g)(n=t[g])&&(null!==(o=a(e,n=!q(n)?I.getPrepared(n):n,i))&&(o.score<l||(u<s?(x.add(o),++u):(++c,o.score>x.peek().score&&x.replaceTop(o)))));if(0===u)return E;var k=new Array(u);for(g=u-1;0<=g;--g)k[g]=x.poll();return k.total=u+c,k},goAsync:function(C,T,S){var L=!1,e=new Promise(function(h,p){if(!C)return h(E);var g=(C=I.prepareSearch(C))[0],v=o(),y=T.length-1,m=S&&S.threshold||_&&_.threshold||-9007199254740991,w=S&&S.limit||_&&_.limit||9007199254740991,b=(S&&void 0!==S.allowTypo?S.allowTypo:!_||void 0===_.allowTypo||_.allowTypo)?I.algorithm:I.algorithmNoTypo,k=0,x=0;function A(){if(L)return p("canceled");var e,t,r=Date.now();if(S&&S.keys)for(var n=S.scoreFn||P,o=S.keys,i=o.length;0<=y;--y){for(var l=T[y],s=new Array(i),a=i-1;0<=a;--a)(e=N(l,c=o[a]))?(q(e)||(e=I.getPrepared(e)),s[a]=b(C,e,g)):s[a]=null;s.obj=l;var u=n(s);if(null!==u&&!(u<m)&&(s.score=u,k<w?(v.add(s),++k):(++x,u>v.peek().score&&v.replaceTop(s)),y%1e3==0&&10<=Date.now()-r))return void(j?setImmediate:setTimeout)(A)}else if(S&&S.key){for(var c=S.key;0<=y;--y)if((e=N(l=T[y],c))&&(q(e)||(e=I.getPrepared(e)),null!==(t=b(C,e,g))&&!(t.score<m)&&(t={target:t.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:t.score,indexes:t.indexes,obj:l},k<w?(v.add(t),++k):(++x,t.score>v.peek().score&&v.replaceTop(t)),y%1e3==0&&10<=Date.now()-r)))return void(j?setImmediate:setTimeout)(A)}else for(;0<=y;--y)if((e=T[y])&&(q(e)||(e=I.getPrepared(e)),null!==(t=b(C,e,g))&&!(t.score<m)&&(k<w?(v.add(t),++k):(++x,t.score>v.peek().score&&v.replaceTop(t)),y%1e3==0&&10<=Date.now()-r)))return void(j?setImmediate:setTimeout)(A);if(0===k)return h(E);for(var d=new Array(k),f=k-1;0<=f;--f)d[f]=v.poll();d.total=k+x,h(d)}j?setImmediate(A):A()});return e.cancel=function(){L=!0},e},highlight:function(e,t,r){if(null===e)return null;void 0===t&&(t="<b>"),void 0===r&&(r="</b>");for(var n="",o=0,i=!1,l=e.target,s=l.length,a=e.indexes,u=0;u<s;++u){var c=l[u];if(a[o]===u){if(i||(i=!0,n+=t),++o===a.length){n+=c+r+l.substr(u+1);break}}else i&&(i=!1,n+=r);n+=c}return n},prepare:function(e){if(e)return{target:e,_targetLowerCodes:I.prepareLowerCodes(e),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(e){if(e)return{target:e,_targetLowerCodes:I.prepareLowerCodes(e),_nextBeginningIndexes:I.prepareNextBeginningIndexes(e),score:null,indexes:null,obj:null}},prepareSearch:function(e){if(e)return I.prepareLowerCodes(e)},getPrepared:function(e){if(999<e.length)return I.prepare(e);var t=r.get(e);return void 0!==t||(t=I.prepare(e),r.set(e,t)),t},getPreparedSearch:function(e){if(999<e.length)return I.prepareSearch(e);var t=n.get(e);return void 0!==t||(t=I.prepareSearch(e),n.set(e,t)),t},algorithm:function(e,t,r){for(var n=t._targetLowerCodes,o=e.length,i=n.length,l=0,s=0,a=0,u=0;;){if(r===n[s]){if(b[u++]=s,++l===o)break;r=e[0===a?l:a===l?l+1:a===l-1?l-1:l]}if(++s>=i)for(;;){if(l<=1)return null;if(0===a){if(r===e[--l])continue;a=l}else{if(1===a)return null;if((r=e[1+(l=--a)])===e[l])continue}s=b[(u=l)-1]+1;break}}var l=0,c=0,d=!1,f=0,h=t._nextBeginningIndexes;null===h&&(h=t._nextBeginningIndexes=I.prepareNextBeginningIndexes(t.target));var p,g=s=0===b[0]?0:h[b[0]-1];if(s!==i)for(;;)if(i<=s){if(l<=0){if(++c>o-2)break;if(e[c]===e[c+1])continue;s=g;continue}--l,s=h[k[--f]]}else if(e[0===c?l:c===l?l+1:c===l-1?l-1:l]===n[s]){if(k[f++]=s,++l===o){d=!0;break}++s}else s=h[s];for(var v=d?(p=k,f):(p=b,u),y=0,m=-1,w=0;w<o;++w)m!==(s=p[w])-1&&(y-=s),m=s;for(d?0!==c&&(y+=-20):(y*=1e3,0!==a&&(y+=-20)),t.score=y-=i-o,t.indexes=new Array(v),w=v-1;0<=w;--w)t.indexes[w]=p[w];return t},algorithmNoTypo:function(e,t,r){for(var n=t._targetLowerCodes,o=e.length,i=n.length,l=0,s=0,a=0;;){if(r===n[s]){if(b[a++]=s,++l===o)break;r=e[l]}if(++s>=i)return null}var u,l=0,c=!1,d=0,f=t._nextBeginningIndexes;if(null===f&&(f=t._nextBeginningIndexes=I.prepareNextBeginningIndexes(t.target)),(s=0===b[0]?0:f[b[0]-1])!==i)for(;;)if(i<=s){if(l<=0)break;--l,s=f[k[--d]]}else if(e[l]===n[s]){if(k[d++]=s,++l===o){c=!0;break}++s}else s=f[s];for(var h=c?(u=k,d):(u=b,a),p=0,g=-1,v=0;v<o;++v)g!==(s=u[v])-1&&(p-=s),g=s;for(c||(p*=1e3),t.score=p-=i-o,t.indexes=new Array(h),v=h-1;0<=v;--v)t.indexes[v]=u[v];return t},prepareLowerCodes:function(e){for(var t=e.length,r=[],n=e.toLowerCase(),o=0;o<t;++o)r[o]=n.charCodeAt(o);return r},prepareBeginningIndexes:function(e){for(var t=e.length,r=[],n=0,o=!1,i=!1,l=0;l<t;++l){var s=e.charCodeAt(l),a=65<=s&&s<=90,u=a||97<=s&&s<=122||48<=s&&s<=57,s=a&&!o||!i||!u,o=a,i=u;s&&(r[n++]=l)}return r},prepareNextBeginningIndexes:function(e){for(var t=e.length,r=I.prepareBeginningIndexes(e),n=[],o=r[0],i=0,l=0;l<t;++l)l<o?n[l]=o:(o=r[++i],n[l]=void 0===o?t:o);return n},cleanup:t,new:e};return I}()});var GhostSearch=function(){function t(e){_classCallCheck(this,t),this.check=!1;e=this.mergeDeep({url:"",key:"",version:"v3",input:"#ghost-search-field",results:"#ghost-search-results",button:"",defaultValue:"",template:function(e){return'<a href="'+[location.protocol,"//",location.url].join("")+"/"+e.slug+'/">'+e.title+"</a>"},trigger:"focus",options:{keys:["title"],limit:10,threshold:-3500,allowTypo:!1},api:{resource:"posts",parameters:{limit:"all",fields:["title","slug"],filter:"",include:"",order:"",formats:"",page:""}},on:{beforeDisplay:function(){},afterDisplay:function(e){},beforeFetch:function(){},afterFetch:function(e){}}},e);Object.assign(this,e),this.init()}return _createClass(t,[{key:"mergeDeep",value:function(t,r){var n=this;return t&&"object"===_typeof(t)&&!Array.isArray(t)&&null!==t&&r&&"object"===_typeof(r)&&!Array.isArray(r)&&null!==r&&Object.keys(r).forEach(function(e){r[e]&&"object"===_typeof(r[e])&&!Array.isArray(r[e])&&null!==r[e]?(t[e]||Object.assign(t,_defineProperty({},e,{})),n.mergeDeep(t[e],r[e])):Object.assign(t,_defineProperty({},e,r[e]))}),t}},{key:"fetch",value:function(){var t=this;this.on.beforeFetch();var e,r=new GhostContentAPI({url:this.url,key:this.key,version:this.version}),n={},o=this.api.parameters;for(e in o)""!=o[e]&&(n[e]=o[e]);r[this.api.resource].browse(n).then(function(e){t.search(e)}).catch(function(e){console.error(e)})}},{key:"createElementFromHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}},{key:"displayResults",value:function(e){if(null!==document.querySelectorAll(this.results)[0].firstChild&&""!==document.querySelectorAll(this.results)[0].firstChild)for(;document.querySelectorAll(this.results)[0].firstChild;)document.querySelectorAll(this.results)[0].removeChild(document.querySelectorAll(this.results)[0].firstChild);var t=document.querySelectorAll(this.input)[0].value;""!=this.defaultValue&&(t=this.defaultValue);var r,n=fuzzysort.go(t,e,{keys:this.options.keys,limit:this.options.limit,allowTypo:this.options.allowTypo,threshold:this.options.threshold});for(r in n)r<n.length&&document.querySelectorAll(this.results)[0].appendChild(this.createElementFromHTML(this.template(n[r].obj)));this.on.afterDisplay(n),this.defaultValue=""}},{key:"search",value:function(t){var e,r=this;this.on.afterFetch(t),this.check=!0,""!=this.defaultValue&&(this.on.beforeDisplay(),this.displayResults(t)),""!=this.button?("INPUT"==(e=document.querySelectorAll(this.button)[0]).tagName&&"submit"==e.type&&e.closest("form").addEventListener("submit",function(e){e.preventDefault()}),e.addEventListener("click",function(e){e.preventDefault(),r.on.beforeDisplay(),r.displayResults(t)})):document.querySelectorAll(this.input)[0].addEventListener("keyup",function(e){r.on.beforeDisplay(),r.displayResults(t)})}},{key:"checkArgs",value:function(){return document.querySelectorAll(this.input).length?document.querySelectorAll(this.results).length?""==this.button||document.querySelectorAll(this.button).length?""==this.url?(console.log("Content API Client Library host missing. Please set the host. Must not end in a trailing slash."),!1):""!=this.key||(console.log('Content API Client Library key missing. Please set the key. Hex string copied from the "Integrations" screen in Ghost Admin.'),!1):(console.log("Button not found."),!1):(console.log("Results not found."),!1):(console.log("Input not found."),!1)}},{key:"validate",value:function(){return!!this.checkArgs()}},{key:"init",value:function(){var t=this;this.validate()&&(""!=this.defaultValue&&(document.querySelectorAll(this.input)[0].value=this.defaultValue,window.onload=function(){t.check||t.fetch()}),"focus"==this.trigger?document.querySelectorAll(this.input)[0].addEventListener("focus",function(e){t.check||t.fetch()}):"load"==this.trigger&&(window.onload=function(){t.check||t.fetch()}))}}]),t}();!function(t,r){var n,o,i,l,s,a,u,c=r.querySelector("link[rel=next]");function d(){if(404===this.status)return t.removeEventListener("scroll",h),void t.removeEventListener("resize",p);this.response.querySelectorAll("article.post-card").forEach(function(e){n.appendChild(r.importNode(e,!0))});var e=this.response.querySelector("link[rel=next]");e?c.href=e.href:(t.removeEventListener("scroll",h),t.removeEventListener("resize",p)),u=r.documentElement.scrollHeight,l=i=!1}function e(){var e;l||(s+a<=u-o?i=!1:(l=!0,(e=new t.XMLHttpRequest).responseType="document",e.addEventListener("load",d),e.open("GET",c.href),e.send(null)))}function f(){i||t.requestAnimationFrame(e),i=!0}function h(){s=t.scrollY,f()}function p(){a=t.innerHeight,u=r.documentElement.scrollHeight,f()}!c||(n=r.querySelector(".post-feed"))&&(l=i=!(o=300),s=t.scrollY,a=t.innerHeight,u=r.documentElement.scrollHeight,t.addEventListener("scroll",h,{passive:!0}),t.addEventListener("resize",p),f())}(window,document);
//# sourceMappingURL=casper.js.map