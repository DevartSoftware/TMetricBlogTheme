function showNavDrop(){$("#main-menu .parent > a").click(function(e){e.preventDefault(),$(this).parent("li").hasClass("drop-visible")?($(this).parent("li").removeClass("drop-visible"),$(this).parent("li").children(".drop").removeClass("visible"),$("#gh-head").removeClass("drop-visible"),$(window).width()<1024&&$(this).parent("li").children(".drop").slideUp()):($(window).width()<1024&&$("#main-menu .drop.visible").slideUp(),$("#main-menu .parent").removeClass("drop-visible"),$(this).parent("li").addClass("drop-visible"),$("#main-menu .drop").removeClass("visible"),$(this).parent("li").children(".drop").addClass("visible"),$("#gh-head").addClass("drop-visible"),$(window).width()<1024&&$(this).parent("li").children(".drop").slideDown())}),$("#main-menu .drop a").click(function(){$(this).attr("href").indexOf("#")+1&&($("#gh-head, #main-menu .parent").removeClass("drop-visible"),$(window).width()<1024&&($("#main-menu .drop.visible").slideUp(),$(".navbar-toggler-right").click()),$("#gh-head .drop").removeClass("visible"))}),$(document).bind("mouseup touchend",function(e){$("#gh-head").is(e.target)||0!==$("#gh-head").has(e.target).length||(1024<=$(window).width()?($("#main-menu .parent").removeClass("drop-visible"),$("#main-menu .drop").removeClass("visible"),$("#gh-head").removeClass("drop-visible")):$("#gh-head").hasClass("mobile-menu-opened")&&$(".navbar-toggler").trigger("click"))})}function showMobileMenu(){function e(){$(".navbar-toggler-right").hasClass("collapsed")?($("header").removeClass("mobile-menu-opened drop-visible"),$("body").removeClass("mobile-menu-opened")):($("header").addClass("mobile-menu-opened"),$("body").addClass("mobile-menu-opened"))}$("#main-menu .tab-content .tab-pane:first-child").addClass("show active"),$("#main-menu .nav .nav-item:first-child .nav-link").addClass("active"),$(".navbar-toggler-right").click(function(){$(window).width()<1024&&($("#main-menu .tab-content .tab-pane").removeClass("show active"),$("#main-menu .nav .nav-item .nav-link").removeClass("active")),setTimeout(e,50)}),$("#main-menu .link-back").click(function(){$("#main-menu .tab-content .tab-pane").removeClass("show active"),$("#main-menu .nav .nav-item .nav-link").removeClass("active")})}function showSidebarMenu(){$(".mobile-menu-opener").click(function(){$(window).width()<=700&&($(".sidebar").toggleClass("nav-visible"),$(".sidebar").hasClass("nav-visible")&&$([document.documentElement,document.body]).animate({scrollTop:$(".sidebar").offset().top-35},300),$(".sidebar .sidebar-menu").slideToggle(300))})}function checkSidebarScrollMenuHeight(){var e;$(".scroll-menu-container .sidebar-menu-list").length&&(e=$(".sidebar-box.subscribe-box").outerHeight(),e=$(window).height()-e-96,$(".scroll-menu-container .sidebar-menu-list").css("max-height",e+"px"))}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(i){"use strict";i.fn.fitVids=function(e){var t,n,r={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(t=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(n.childNodes[1])),e&&i.extend(r,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];r.customSelector&&e.push(r.customSelector);var o=".fitvidsignore";r.ignore&&(o=o+", "+r.ignore);e=i(this).find(e.join(","));(e=(e=e.not("object object")).not(o)).each(function(){var e,t,n=i(this);0<n.parents(o).length||"embed"===this.tagName.toLowerCase()&&n.parent("object").length||n.parent(".fluid-width-video-wrapper").length||(n.css("height")||n.css("width")||!isNaN(n.attr("height"))&&!isNaN(n.attr("width"))||(n.attr("height",9),n.attr("width",16)),e=("object"===this.tagName.toLowerCase()||n.attr("height")&&!isNaN(parseInt(n.attr("height"),10))?parseInt(n.attr("height"),10):n.height())/(isNaN(parseInt(n.attr("width"),10))?n.width():parseInt(n.attr("width"),10)),n.attr("name")||(t="fitvid"+i.fn.fitVids._count,n.attr("name",t),i.fn.fitVids._count++),n.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),n.removeAttr("height").removeAttr("width"))})})},i.fn.fitVids._count=0}(window.jQuery||window.Zepto),$(document).ready(function(){function e(){10<$(window).scrollTop()?$("#gh-head").addClass("scrolled-down"):$("#gh-head").removeClass("scrolled-down"),100<$(window).scrollTop()?$(".btn-to-top").show():$(".btn-to-top").hide()}e(),showNavDrop(),showMobileMenu(),showSidebarMenu(),checkSidebarScrollMenuHeight(),$(window).scroll(function(){e()}),$(".btn-to-top").click(function(){$("html, body").animate({scrollTop:0},500)})}),$(window).on("load",function(){let o=!1;$(window).scroll(function(){var e,t,n;$(".sales-anchor").length&&(e=$(".sales-anchor").offset().top,t=$(window).scrollTop(),n=$(window).height()/2,e<t+n&&!o&&($("#sales-fader, .sales-popup, .discount-popup").addClass("visible"),o=!0))}),$("#sales-fader, .btn-popup-close").click(function(){$("#sales-fader, .sales-popup, .discount-popup").removeClass("visible")}),$(".sales-popup .btn-copy").click(function(){!function(){let e=$("<input>");$("body").append(e),e.val($("#code-field").text()).select(),document.execCommand("copy"),e.remove()}();var e="Copied: "+$("#code-field").html();$(".sales-popup .tooltip").html(e)})}),$(window).resize(function(){$("#main-menu .parent").removeClass("drop-visible").children(".drop").removeClass("visible"),$("#gh-head").removeClass("drop-visible"),$("#main-menu .drop").show(),$("body, #gh-head").removeClass("mobile-menu-opened"),$(".navbar-toggler").addClass("collapsed"),$(".navbar-collapse").removeClass("show"),$("#main-menu .tab-content .tab-pane").removeClass("show active"),$("#main-menu .nav .nav-item .nav-link").removeClass("active"),$("#main-menu .tab-content .tab-pane:first-child").addClass("show active"),$("#main-menu .nav .nav-item:first-child .nav-link").addClass("active"),$(window).width()<1024&&$("#main-menu .drop").hide(),checkSidebarScrollMenuHeight()}),function(e){e.addEventListener("DOMContentLoaded",function(){e.querySelectorAll(".kg-gallery-image img").forEach(function(e){var t=e.closest(".kg-gallery-image"),n=e.attributes.width.value,e=e.attributes.height.value;t.style.flex=n/e+" 1 0%"})})}((window,document)),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.fuzzysort=t()}(this,function(){var I="undefined"!=typeof require&&"undefined"==typeof window,n=new Map,o=new Map,j=[];j.total=0;var y=[],$=[];function t(){n.clear(),o.clear(),y=[],$=[]}function E(e){for(var t=-9007199254740991,n=e.length-1;0<=n;--n){var o=e[n];null===o||t<(o=o.score)&&(t=o)}return-9007199254740991===t?null:t}function M(e,t){var n=e[t];if(void 0!==n)return n;for(var o=t,r=(o=!Array.isArray(t)?t.split("."):o).length,i=-1;e&&++i<r;)e=e[o[i]];return e}function N(e){return"object"==typeof e}function r(){var i=[],l=0,e={};function t(){for(var e=i[o=0],t=1;t<l;){var n=t+1,o=t;n<l&&i[n].score<i[t].score&&(o=n),i[o-1>>1]=i[o],t=1+(o<<1)}for(var r=o-1>>1;0<o&&e.score<i[r].score;r=(o=r)-1>>1)i[o]=i[r];i[o]=e}return e.add=function(e){var t=l;i[l++]=e;for(var n=t-1>>1;0<t&&e.score<i[n].score;n=(t=n)-1>>1)i[t]=i[n];i[t]=e},e.poll=function(){if(0!==l){var e=i[0];return i[0]=i[--l],t(),e}},e.peek=function(e){if(0!==l)return i[0]},e.replaceTop=function(e){i[0]=e,t()},e}var C=r();return function e(L){var _={single:function(e,t,n){return e?(N(e)||(e=_.getPreparedSearch(e)),t?(N(t)||(t=_.getPrepared(t)),((n&&void 0!==n.allowTypo?n.allowTypo:!L||void 0===L.allowTypo||L.allowTypo)?_.algorithm:_.algorithmNoTypo)(e,t,e[0])):null):null},go:function(e,t,n){if(!e)return j;var o,r,i=(e=_.prepareSearch(e))[0],l=n&&n.threshold||L&&L.threshold||-9007199254740991,a=n&&n.limit||L&&L.limit||9007199254740991,s=(n&&void 0!==n.allowTypo?n.allowTypo:!L||void 0===L.allowTypo||L.allowTypo)?_.algorithm:_.algorithmNoTypo,c=0,u=0,d=t.length;if(n&&n.keys)for(var h=n.scoreFn||E,p=n.keys,f=p.length,m=d-1;0<=m;--m){for(var v=t[m],g=new Array(f),w=f-1;0<=w;--w)(o=M(v,y=p[w]))?(N(o)||(o=_.getPrepared(o)),g[w]=s(e,o,i)):g[w]=null;g.obj=v;var b=h(g);null!==b&&(b<l||(g.score=b,c<a?(C.add(g),++c):(++u,b>C.peek().score&&C.replaceTop(g))))}else if(n&&n.key)for(var y=n.key,m=d-1;0<=m;--m)(o=M(v=t[m],y))&&(null!==(r=s(e,o=!N(o)?_.getPrepared(o):o,i))&&(r.score<l||(r={target:r.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:r.score,indexes:r.indexes,obj:v},c<a?(C.add(r),++c):(++u,r.score>C.peek().score&&C.replaceTop(r)))));else for(m=d-1;0<=m;--m)(o=t[m])&&(null!==(r=s(e,o=!N(o)?_.getPrepared(o):o,i))&&(r.score<l||(c<a?(C.add(r),++c):(++u,r.score>C.peek().score&&C.replaceTop(r)))));if(0===c)return j;var $=new Array(c);for(m=c-1;0<=m;--m)$[m]=C.poll();return $.total=c+u,$},goAsync:function(x,T,S){var A=!1,e=new Promise(function(p,f){if(!x)return p(j);var m=(x=_.prepareSearch(x))[0],v=r(),g=T.length-1,w=S&&S.threshold||L&&L.threshold||-9007199254740991,b=S&&S.limit||L&&L.limit||9007199254740991,y=(S&&void 0!==S.allowTypo?S.allowTypo:!L||void 0===L.allowTypo||L.allowTypo)?_.algorithm:_.algorithmNoTypo,$=0,C=0;function k(){if(A)return f("canceled");var e,t,n=Date.now();if(S&&S.keys)for(var o=S.scoreFn||E,r=S.keys,i=r.length;0<=g;--g){for(var l=T[g],a=new Array(i),s=i-1;0<=s;--s)(e=M(l,u=r[s]))?(N(e)||(e=_.getPrepared(e)),a[s]=y(x,e,m)):a[s]=null;a.obj=l;var c=o(a);if(null!==c&&!(c<w)&&(a.score=c,$<b?(v.add(a),++$):(++C,c>v.peek().score&&v.replaceTop(a)),g%1e3==0&&10<=Date.now()-n))return void(I?setImmediate:setTimeout)(k)}else if(S&&S.key){for(var u=S.key;0<=g;--g)if((e=M(l=T[g],u))&&(N(e)||(e=_.getPrepared(e)),null!==(t=y(x,e,m))&&!(t.score<w)&&(t={target:t.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:t.score,indexes:t.indexes,obj:l},$<b?(v.add(t),++$):(++C,t.score>v.peek().score&&v.replaceTop(t)),g%1e3==0&&10<=Date.now()-n)))return void(I?setImmediate:setTimeout)(k)}else for(;0<=g;--g)if((e=T[g])&&(N(e)||(e=_.getPrepared(e)),null!==(t=y(x,e,m))&&!(t.score<w)&&($<b?(v.add(t),++$):(++C,t.score>v.peek().score&&v.replaceTop(t)),g%1e3==0&&10<=Date.now()-n)))return void(I?setImmediate:setTimeout)(k);if(0===$)return p(j);for(var d=new Array($),h=$-1;0<=h;--h)d[h]=v.poll();d.total=$+C,p(d)}I?setImmediate(k):k()});return e.cancel=function(){A=!0},e},highlight:function(e,t,n){if(null===e)return null;void 0===t&&(t="<b>"),void 0===n&&(n="</b>");for(var o="",r=0,i=!1,l=e.target,a=l.length,s=e.indexes,c=0;c<a;++c){var u=l[c];if(s[r]===c){if(i||(i=!0,o+=t),++r===s.length){o+=u+n+l.substr(c+1);break}}else i&&(i=!1,o+=n);o+=u}return o},prepare:function(e){if(e)return{target:e,_targetLowerCodes:_.prepareLowerCodes(e),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(e){if(e)return{target:e,_targetLowerCodes:_.prepareLowerCodes(e),_nextBeginningIndexes:_.prepareNextBeginningIndexes(e),score:null,indexes:null,obj:null}},prepareSearch:function(e){if(e)return _.prepareLowerCodes(e)},getPrepared:function(e){if(999<e.length)return _.prepare(e);var t=n.get(e);return void 0!==t||(t=_.prepare(e),n.set(e,t)),t},getPreparedSearch:function(e){if(999<e.length)return _.prepareSearch(e);var t=o.get(e);return void 0!==t||(t=_.prepareSearch(e),o.set(e,t)),t},algorithm:function(e,t,n){for(var o=t._targetLowerCodes,r=e.length,i=o.length,l=0,a=0,s=0,c=0;;){if(n===o[a]){if(y[c++]=a,++l===r)break;n=e[0===s?l:s===l?l+1:s===l-1?l-1:l]}if(++a>=i)for(;;){if(l<=1)return null;if(0===s){if(n===e[--l])continue;s=l}else{if(1===s)return null;if((n=e[1+(l=--s)])===e[l])continue}a=y[(c=l)-1]+1;break}}var l=0,u=0,d=!1,h=0,p=t._nextBeginningIndexes;null===p&&(p=t._nextBeginningIndexes=_.prepareNextBeginningIndexes(t.target));var f,m=a=0===y[0]?0:p[y[0]-1];if(a!==i)for(;;)if(i<=a){if(l<=0){if(++u>r-2)break;if(e[u]===e[u+1])continue;a=m;continue}--l,a=p[$[--h]]}else if(e[0===u?l:u===l?l+1:u===l-1?l-1:l]===o[a]){if($[h++]=a,++l===r){d=!0;break}++a}else a=p[a];for(var v=d?(f=$,h):(f=y,c),g=0,w=-1,b=0;b<r;++b)w!==(a=f[b])-1&&(g-=a),w=a;for(d?0!==u&&(g+=-20):(g*=1e3,0!==s&&(g+=-20)),t.score=g-=i-r,t.indexes=new Array(v),b=v-1;0<=b;--b)t.indexes[b]=f[b];return t},algorithmNoTypo:function(e,t,n){for(var o=t._targetLowerCodes,r=e.length,i=o.length,l=0,a=0,s=0;;){if(n===o[a]){if(y[s++]=a,++l===r)break;n=e[l]}if(++a>=i)return null}var c,l=0,u=!1,d=0,h=t._nextBeginningIndexes;if(null===h&&(h=t._nextBeginningIndexes=_.prepareNextBeginningIndexes(t.target)),(a=0===y[0]?0:h[y[0]-1])!==i)for(;;)if(i<=a){if(l<=0)break;--l,a=h[$[--d]]}else if(e[l]===o[a]){if($[d++]=a,++l===r){u=!0;break}++a}else a=h[a];for(var p=u?(c=$,d):(c=y,s),f=0,m=-1,v=0;v<r;++v)m!==(a=c[v])-1&&(f-=a),m=a;for(u||(f*=1e3),t.score=f-=i-r,t.indexes=new Array(p),v=p-1;0<=v;--v)t.indexes[v]=c[v];return t},prepareLowerCodes:function(e){for(var t=e.length,n=[],o=e.toLowerCase(),r=0;r<t;++r)n[r]=o.charCodeAt(r);return n},prepareBeginningIndexes:function(e){for(var t=e.length,n=[],o=0,r=!1,i=!1,l=0;l<t;++l){var a=e.charCodeAt(l),s=65<=a&&a<=90,c=s||97<=a&&a<=122||48<=a&&a<=57,a=s&&!r||!i||!c,r=s,i=c;a&&(n[o++]=l)}return n},prepareNextBeginningIndexes:function(e){for(var t=e.length,n=_.prepareBeginningIndexes(e),o=[],r=n[0],i=0,l=0;l<t;++l)l<r?o[l]=r:(r=n[++i],o[l]=void 0===r?t:r);return o},cleanup:t,new:e};return _}()});var GhostSearch=function(){function t(e){_classCallCheck(this,t),this.check=!1;e=this.mergeDeep({url:"",key:"",version:"v3",input:"#ghost-search-field",results:"#ghost-search-results",button:"",defaultValue:"",template:function(e){return'<a href="'+[location.protocol,"//",location.url].join("")+"/"+e.slug+'/">'+e.title+"</a>"},trigger:"focus",options:{keys:["title"],limit:10,threshold:-3500,allowTypo:!1},api:{resource:"posts",parameters:{limit:"all",fields:["title","slug"],filter:"",include:"",order:"",formats:"",page:""}},on:{beforeDisplay:function(){},afterDisplay:function(e){},beforeFetch:function(){},afterFetch:function(e){}}},e);Object.assign(this,e),this.init()}return _createClass(t,[{key:"mergeDeep",value:function(t,n){var o=this;return t&&"object"===_typeof(t)&&!Array.isArray(t)&&null!==t&&n&&"object"===_typeof(n)&&!Array.isArray(n)&&null!==n&&Object.keys(n).forEach(function(e){n[e]&&"object"===_typeof(n[e])&&!Array.isArray(n[e])&&null!==n[e]?(t[e]||Object.assign(t,_defineProperty({},e,{})),o.mergeDeep(t[e],n[e])):Object.assign(t,_defineProperty({},e,n[e]))}),t}},{key:"fetch",value:function(){var t=this;this.on.beforeFetch();var e,n=new GhostContentAPI({url:this.url,key:this.key,version:this.version}),o={},r=this.api.parameters;for(e in r)""!=r[e]&&(o[e]=r[e]);n[this.api.resource].browse(o).then(function(e){t.search(e)}).catch(function(e){console.error(e)})}},{key:"createElementFromHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}},{key:"displayResults",value:function(e){if(null!==document.querySelectorAll(this.results)[0].firstChild&&""!==document.querySelectorAll(this.results)[0].firstChild)for(;document.querySelectorAll(this.results)[0].firstChild;)document.querySelectorAll(this.results)[0].removeChild(document.querySelectorAll(this.results)[0].firstChild);var t=document.querySelectorAll(this.input)[0].value;""!=this.defaultValue&&(t=this.defaultValue);var n,o=fuzzysort.go(t,e,{keys:this.options.keys,limit:this.options.limit,allowTypo:this.options.allowTypo,threshold:this.options.threshold});for(n in o)n<o.length&&document.querySelectorAll(this.results)[0].appendChild(this.createElementFromHTML(this.template(o[n].obj)));this.on.afterDisplay(o),this.defaultValue=""}},{key:"search",value:function(t){var e,n=this;this.on.afterFetch(t),this.check=!0,""!=this.defaultValue&&(this.on.beforeDisplay(),this.displayResults(t)),""!=this.button?("INPUT"==(e=document.querySelectorAll(this.button)[0]).tagName&&"submit"==e.type&&e.closest("form").addEventListener("submit",function(e){e.preventDefault()}),e.addEventListener("click",function(e){e.preventDefault(),n.on.beforeDisplay(),n.displayResults(t)})):document.querySelectorAll(this.input)[0].addEventListener("keyup",function(e){n.on.beforeDisplay(),n.displayResults(t)})}},{key:"checkArgs",value:function(){return document.querySelectorAll(this.input).length?document.querySelectorAll(this.results).length?""==this.button||document.querySelectorAll(this.button).length?""==this.url?(console.log("Content API Client Library host missing. Please set the host. Must not end in a trailing slash."),!1):""!=this.key||(console.log('Content API Client Library key missing. Please set the key. Hex string copied from the "Integrations" screen in Ghost Admin.'),!1):(console.log("Button not found."),!1):(console.log("Results not found."),!1):(console.log("Input not found."),!1)}},{key:"validate",value:function(){return!!this.checkArgs()}},{key:"init",value:function(){var t=this;this.validate()&&(""!=this.defaultValue&&(document.querySelectorAll(this.input)[0].value=this.defaultValue,window.onload=function(){t.check||t.fetch()}),"focus"==this.trigger?document.querySelectorAll(this.input)[0].addEventListener("focus",function(e){t.check||t.fetch()}):"load"==this.trigger&&(window.onload=function(){t.check||t.fetch()}))}}]),t}();function parseMenuItemsFromContent(e){var t=e.contentContainer||"body",l=e.itemSelectors||"h2";"string"==typeof l&&(l=[l]);var a=[],s=[];return $(l.join(","),$(t)).each(function(e,t){var o=$(t),n=l.reduce(function(e,t,n){return e||(o.is(t)?t:e)},null),r=l.indexOf(n),i=o.text(),t=o.prop("id");t||(n=i.toLowerCase().replace(/ /g,"-").replace(/[^_\w\d-]/g,"_"),s[r]=n,t=s.slice(0,r+1).join("--"),o.prop("id",t)),a.push({id:t,text:i,level:r})}),a}function initScrollMenu(e){var t=e.menuContainer||"body",n=e.menuItems||[],o="boolean"!=typeof e.menuAlwaysVisible||e.menuAlwaysVisible,r=e.scrollDuration||300,l=e.scrollTopOffset||0,a=e.scrollBottomOffset||0,i="scroll-menu-"+Date.now()+"-"+Math.round(Math.random()*Date.now()),s="#"+i,c=[],u=!1;function d(o){$(c).each(function(e,t){var n="#"+t,t=t==o;$(n).toggleClass("active",t),$(s+' li a[href="'+n+'"]').closest("li").toggleClass("active",t)})}function h(e){var t=$(e);t.length&&(u=!0,$("html, body").animate({scrollTop:Math.round(t.offset().top-l)},r).promise().then(function(){d(e.replace("#","")),u=!1}))}function p(e){var t,n,o,r,i;u||(t=$(window).scrollTop(),i=$(window).height(),n=Math.round(t),o=Math.round(t+i),d((i=(r=c.map(function(e){var t,n=$("#"+e);return{id:e,top:t=n&&1==n.length?Math.round(n.offset().top):t}}).sort(function(e,t){return e.top-t.top})).filter(function(e,t){t=r[t+1],t=t&&t.top||o-a;return e.top<o&&n+l<t})[0])&&i.id))}function f(e){this.hash&&(e.preventDefault(),h(e=this.hash),location.hash=e)}$(document).ready(function(){var r;n.length&&((r=$("<ul></ul>").attr("data-menu-level",0).prop({id:i,class:"scroll-menu"})).toggleClass("visible",o),r.toggleClass("hidden",!o),n.forEach(function(e){var t=$("<a></a>",{href:"#"+e.id}).text(e.text),n=$("<li></li>").append(t),o=$("li",r).last();o.length?((t=$(o).parents('ul[data-menu-level="'+e.level+'"]')).length||(t=$("<ul></ul>").attr("data-menu-level",e.level),o.append(t)),t.append(n)):r.append(n),c.push(e.id)}),$(t).append(r),location.hash?h(location.hash):p(),$(document).on("scroll resize",p),$(c).each(function(e,t){$('a[href="#'+t+'"]').on("click",f)}),$(window).on("hashchange",function(e){u||h(location.hash)}))})}!function(t,n){var o,r,i,l,a,s,c,u;function d(){if(404===this.status)return t.removeEventListener("scroll",p),void t.removeEventListener("resize",f);this.response.querySelectorAll("article.post-card").forEach(function(e){r.appendChild(n.importNode(e,!0))});var e=this.response.querySelector("link[rel=next]");e?o.href=e.href:(t.removeEventListener("scroll",p),t.removeEventListener("resize",f)),u=n.documentElement.scrollHeight,a=l=!1}function e(){var e;a||(s+c<=u-i?l=!1:(a=!0,(e=new t.XMLHttpRequest).responseType="document",e.addEventListener("load",d),e.open("GET",o.href),e.send(null)))}function h(){l||t.requestAnimationFrame(e),l=!0}function p(){s=t.scrollY,h()}function f(){c=t.innerHeight,u=n.documentElement.scrollHeight,h()}n.documentElement.classList.contains("no-infinite-scroll")||(!(o=n.querySelector("link[rel=next]"))||(r=n.querySelector(".post-feed"))&&(a=l=!(i=300),s=t.scrollY,c=t.innerHeight,u=n.documentElement.scrollHeight,t.addEventListener("scroll",p,{passive:!0}),t.addEventListener("resize",f),h()))}(window,document);
//# sourceMappingURL=casper.js.map